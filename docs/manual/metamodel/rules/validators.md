# Архитектурные валидаторы (validators)

Валидаторы позволяют контролировать код архитектуры на консистеностность и достаточность. Предоставляют возможность
верифицировать ее с внешними источниками и контролировать архитектурные стандарты.

Каждый валидатор имеет свой уникальный, структурированный идентификатор. На основании идентификаторов строится
дерево, которое наглядно определяет где обнаружена проблема.

## Простой валидатор

Пример описания простого валидатора:
```code-frame
rules/validators/dochub.fields.experts
```
В поле 'source' можно указать идентификатор источника данных ['dataset'](@document/dochub.datasets).
В целом, работа валидаторов с источниками аналогичная работе [таблиц](@document/dochub.tables) с ними.

Результат работы данного примера можно посмотреть [здесь](/problems/dochub.fields.experts).

Результатом работы валидатора становится массив структур описывающих обнаруженные ошибки. Например:

```JSON
[
  {
    "uid": "expert-component-dochub.front",
    "title": "Не указан эксперт для компонента",
    "location": "@components/dochub.front",
    "path": "/components/dochub.front",
    "description": "Нужно знать, кто может помочь с этим компонентом",
    "correction": "Укажите эксперта компонента"
  }
]
```

* ***uid***         - Обязательное поле. Уникальный идентификатор ошибки. Важно обеспечить его глобальную уникальность.
* ***title***       - Опциональное поле. Определяет представление отклонения в дереве.
* ***location***    - Опциональное поле. URL с расположением объекта, где выявлена ошибка.
* ***path***        - Опциональное поле. Путь к участку кода, где содержится ошибка.
* ***description*** - Опциональное поле. Описание причины/смысла проблемы.
* ***correction***  - Опциональное поле. Краткое пояснение, как исправить ошибку.

## Валидатор с использованием JSON Schema

Для контроля метамодели больше подходит специализированный словарь, который позволяет аннотировать и проверять 
структуру данных архитектуры. В качестве такого словаря используется [JSON Schema](https://json-schema.org/), 
реализованная NPM пакетом [avj](https://www.npmjs.com/package/ajv).

Пример описания отклонения:
```code-frame
rules/validators/dochub.fields.source
```
Результат работы валидатора аналогичен простому валидатору.
