# Формы (forms)

Подход "Архитектура как код" не всегда оказывается удобным для пользователей архитектурного репозитория. 
Привыкшие к классическим UI-интерфейсам пользователи, могут столкнуться с трудностями при взаимодействии
с архитектурным репозиторием на первом этапе. Чтобы облегчить их опыт и предложить привычные методы работы
с репозиторием, по крайней мере на начальном этапе, DocHub предлагает динамические UI-формы.

## Простой пример динамической формы

Пример описания формы:
```yaml
docs:
  dochub.forms.examples.simple:                       # Идентификатор документа
    description: Простой пример динамической формы    # Описание документа
    type: form                                        # Тип определяющий динамическую форму
    source:                                           # Данные для построения формы
      schema:                                         # JSONSchema
        type: object
        title: Тестовая форма заполнения данных о пользователе
        properties:
          first_name:
            title: Имя
            type: string
          last_name:
            title: Фамилия
            type: string
          address:
            title: Адрес регистрации
            type: string
        required:
          - first_name
          - last_name
          - address  
```

Данная форма позволяет заполнять данные о пользователе в привычной для него форме. В текущем виде она не позволяет сохранять 
введенные данные или манипулировать ими, но мы можем посмотреть как работает ввод и проверка корректности ее заполнения.

Встраивание формы в документы осуществляется обычным методом встройки объектов:
```
![Форма](@document/dochub.forms.examples.simple)
```



Результат встройки выглядит так:
![Форма](@document/dochub.forms.examples.simple)

## Пример формы с алгоритмом поведения

Формы могут выполнять действия по триггерам. Обработчики триггеров реализуются на JSONata. При наступлении события вызывается
соответствующий обработчик, в который передаются переменные:

**$self**      - профиль презентации;
**$form**      - заполненные данные в форме;
**$params**    - переданные параметры при вызове презентации;
**$**          - DataLake.

Существуют следующие триггеры:

**validate**   - вызывается после заполнения формы для проверки на ошибки;
**post**       - вызывается при нажатии кнопки сохранения;
**change**     - вызывается при изменении значения одного из полей.

Для примера создадим форму сложения двух чисел.
```yaml
docs:
  dochub.forms.examples.summ:
    description: Форма суммирования значений полей     
    type: form                                        
    source:                                           
      schema:                                         
        type: object
        title: Форма суммирования полей
        properties:
          a:
            title: Число "a"
            type: number
          b:
            title: Число "b"
            type: number
          result:
            title: Результат
            type: number
        required:
          - a
          - b
        order: # Свойство определяет порядок вывода полей на формы сверху вниз и слева направо
          - b
          - a
          - result          
      triggers:
        change: >
          (
            $merge([$form, {
              "result": $form.a + $form.b
            }])
          )
```
![Форма сложения чисел](@document/dochub.forms.examples.summ)

[Далее](/docs/dochub.entities)
